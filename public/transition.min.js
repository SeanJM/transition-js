!function(){function t(t,n){this.method={then:[],"catch":[]},this.options=t.options,this.callback=n,this.iterations=0}function n(t){var n=6;return Math.pow(t,2)*((n+1)*t-n)}function e(t){for(var n=0,e=1;1;n+=e,e/=2)if(t>=(7-4*n)/11)return-Math.pow((11-6*n-11*t)/4,2)+Math.pow(e,2)}function i(t){return t}function o(t){return Math.pow(t,6)}function a(t,n){return n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2}function r(t,n){return t(n)}function s(t,n){return 1-t(1-n)}function u(n){return new t(this,n).start()}function h(t){var n={},e={};for(var i in t)q.indexOf(i)===-1&&(n[i]=t[i][0],e[i]=t[i][1]);this.options={start:n,end:e,delta:y[t.delta]||y.quadratic,ease:v[t.ease]||v["in-out"],elastic:t.elastic||0,iterations:"number"==typeof t.iterations?t.iterations:1,duration:t.duration||300,delay:t.delay||0,fps:t.fps?1e3/t.fps:10}}function c(t){"function"==typeof t&&t()}function f(t){this.queue=[],this.history=[],enqueue(this,{name:"transition",method:h,arguments:[t]})}function p(t,n){for(var e in t)if(n(t[e],e)===!1)return!1}function d(t,n,e){return t+(n-t)*e}function l(t,n){return Math.round(t*Math.pow(10,n))/Math.pow(10,n)}function m(t){t.method["catch"]=[],w(t.method.then)}function w(t){for(var n=arguments.length,e=new Array(n),i=1;i<n;i++)e.push(arguments[i]);for(;t&&t.length;)t[0].apply(e),t.shift()}var y={back:n,bounce:e,linear:i,quadratic:o},v={"in":r,"in-out":a,out:s},q=["delta","ease","elastic","iterations","duration","delay","fps"];t.prototype.then=function(t){this.method.then.push(t)},t.prototype.elastify=function(t,n){var e=1-Math.pow(n,5),i=1-Math.pow(2,15*--e)*Math.cos(30*e*Math.PI*1/2);return d(t,i,this.options.elastic)},t.prototype.start=function(){var t,n,e=this,i=this.options.start,o=this.options.end,a=this.options.duration,r=this.options.delay,s={};return setTimeout(function(){e.options.timer=setInterval(function(){n=n||new Date,t=Math.min((new Date-n)/a,1),p(i,function(n,a){var r=e.elastify(e.options.ease(e.options.delta,t),t),u=l(r,2);s[a]=i[a]+u*(o[a]-i[a])}),e.callback(s,t),1===t&&(e.iterations++,clearInterval(e.options.timer),e.options.iterations===e.iterations?m(e):e.start())},e.options.fps)},r),this},function(){function t(t){var n=t.slice(-1)[0],e=t.length>1&&t.slice(-2)[0],i=n&&e&&n.method!==c&&n.method===e.method;if(i)throw"Cannot chain two of the same method, unless that method is 'then'"}function n(t){var e,i=t.queue;!t.waiting&&i[0]&&(e=i[0].method.apply(t,i[0].arguments),e&&"function"==typeof e.then?(t.waiting=!0,e.then(function(){t.waiting=!1,i.shift(),n(t)})):(i.shift(),n(t)))}function e(e,i){e.queue.push(i),e.history.push(i),t(e.history),n(e)}window.enqueue=e}(),window.transition=function(t){return new f(t)},f.prototype.start=function(t){return enqueue(this,{name:"start",method:u,arguments:[t]}),this},f.prototype.transition=function(t){return enqueue(this,{name:"transition",method:h,arguments:[t]}),this},f.prototype.then=function(t){return enqueue(this,{name:"then",method:c,arguments:[t]}),this},f.prototype.stop=function(t){return this.queue=[],clearInterval(this.options.timer),this},f.ease={"in":r,out:s,inOut:a},f.delta={linear:i,quadratic:o,bounce:e,back:n}}();